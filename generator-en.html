<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="author" value="yanjisheng">
<title>World Clock Widget Generator</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.15.14/theme-chalk/index.min.css" integrity="sha512-cTraKrkPq3y0mm73JlMTDOugmX/NwJ/WCitAFxMdS/l+P/qMIUzGkbg3oCx9e8suEU2rurxP+5aIidz0ZjKdpw==" crossorigin="anonymous" referrerpolicy="no-referrer">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.7.14/vue.min.js" integrity="sha512-BAMfk70VjqBkBIyo9UTRLl3TBJ3M0c6uyy2VMUrq370bWs7kchLNN9j1WiJQus9JAJVqcriIUX859JOm12LWtw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.15.14/index.min.js" integrity="sha512-UFrGse168I/Fki88TZky6wKSHCJykXJBpzmqwBzbIHzsadjMPpch2HULCuAQLewK19bXUf8PqkEjGSWPiUJ3qQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<style>
body{
    font-family: sans-serif;
    text-align: center;
    vertical-align: middle;
    overflow-y: scroll;
}
table thead{
    height: 30px;
    background-color: #333333;
    color: #ffffff;
    font-weight: bold;
}
table thead a{
    color: #ffffff;
}
tbody tr:hover{
    background-color: #dadada;
}
.el-input__inner{
    padding: 3px;
}
.el-autocomplete-suggestion{
    width: inherit !important;
}
.el-tabs{
    width: 605px;
    display: inline-block;
}
.el-row{
    text-align: right;
    min-height: 45px;
}
.el-col>div.el-slider{
    display: inline-block;
    width: 120px;
    padding: 0 12px;
}
.el-col-8>div.el-select, .el-col-24>div.el-select{
    width: 70px;
}
.el-col-12>div.el-select{
    width: 150px;
}
.el-col-16>div.el-input{
    width: 250px;
}
.el-col-12>div.el-input, .el-col-12>div.el-autocomplete{
    width: 150px;
}
.el-col>div.el-input-number{
    width: 120px;
}
.el-color-dropdown__link-btn{
    display: none;
}
.el-color-dropdown__btn span::before{
    content: "OK";
    font-size: 12px;
}
.el-color-dropdown__btn span{
    font-size: 0px;
}
.el-tab-pane p, .el-tab-pane h2{
    text-align: justify;
}
.el-dialog{
    width: 50%;
    min-width: 700px;
}
h2{
    margin: 10px;
}
p{
    margin: 5px;
}
#previewBox{
    display: inline-block;
    vertical-align: top;
    width: 560px;
}
#preview{
    background-image: url(bg.png);
    padding: 10px;
}
#saveButton{
    margin: 15px;
}
</style>
</head>
<body>
<div id="vue">
    <el-tabs value="about">
        <el-tab-pane label="Timezone List" name="tzlist">
            <table>
                <thead>
                    <td>Index</td>
                    <td style="min-width:200px"><a href="https://data.iana.org/time-zones/tzdb/zone1970.tab" title="Choose a standard IANA timezone in the link." target="_blank">IANA Timezone</a></td>
                    <td style="min-width:200px">Showing Location Name</td>
                    <td style="min-width:140px">Operations</td>
                </thead>
                <tbody id="tableContent">
                    <tr v-for="(t, index) in timezoneList" :key="index">
                        <td>{{index}}</td>
                        <td>{{t.ianaTimezone}}</td>
                        <td>{{t.showLocation}}</td>
                        <td>
                            <el-button-group>
                                <el-button type="warning" icon="el-icon-edit" circle size="mini" title="Edit" @click="editMe2(index)"></el-button>
                                <el-button type="success" icon="el-icon-plus" circle size="mini" title="Add" @click="addMe2(index)"></el-button>
                                <el-button type="primary" icon="el-icon-top" circle size="mini" title="Move Up" @click="moveUp(index)"></el-button>
                                <el-button type="primary" icon="el-icon-bottom" circle size="mini" title="Move Down" @click="moveDown(index)"></el-button>
                                <el-button type="danger" icon="el-icon-delete" circle size="mini" title="Delete" @click="deleteMe(index)"></el-button>
                            </el-button-group>
                        </td>
                    </tr>
                </tbody>
            </table>
        </el-tab-pane>
        <el-tab-pane label="Other settings" name="color">
            <h2>Date & Time Format</h2>
            <el-row>
                <el-col :span="12">Time format: 
                    <el-select size="mini" v-model="timeFormat">
                        <el-option label="23:59:59" value="timeFormat1"></el-option>
                        <el-option label="23:59" value="timeFormat2"></el-option>
                        <el-option label="11:59:59 pm" value="timeFormat3"></el-option>
                        <el-option label="11:59 pm" value="timeFormat4"></el-option>
                    </el-select>
                </el-col>
                <el-col :span="12">Date format: 
                    <el-select size="mini" v-model="dateFormat">
                        <el-option-group label="British(date, month, year)">
                            <el-option label="Wednesday, 31 December 2025" value="dateFormat1"></el-option>
                            <el-option label="Wed, 31 Dec 2025" value="dateFormat2"></el-option>
                            <el-option label="Wednesday, 31 December" value="dateFormat3"></el-option>
                            <el-option label="Wed, 31 Dec" value="dateFormat4"></el-option>
                            <el-option label="31 December 2025" value="dateFormat5"></el-option>
                            <el-option label="31 Dec" value="dateFormat6"></el-option>
                            <el-option label="Wednesday, 31/12/2025" value="dateFormat7"></el-option>
                            <el-option label="Wed, 31/12/2025" value="dateFormat8"></el-option>
                            <el-option label="Wed, 31/12" value="dateFormat9"></el-option>
                            <el-option label="31/12/2025" value="dateFormat10"></el-option>
                            <el-option label="31/12" value="dateFormat11"></el-option>
                        </el-option-group>
                        <el-option-group label="American(month, date, year)">
                            <el-option label="Wednesday, December 31, 2025" value="dateFormat12"></el-option>
                            <el-option label="Wed, Dec 31, 2025" value="dateFormat13"></el-option>
                            <el-option label="Wednesday, December 31" value="dateFormat14"></el-option>
                            <el-option label="Wed, Dec 31" value="dateFormat15"></el-option>
                            <el-option label="December 31, 2025" value="dateFormat16"></el-option>
                            <el-option label="Dec 31" value="dateFormat17"></el-option>
                            <el-option label="Wednesday, 12/31/2025" value="dateFormat18"></el-option>
                            <el-option label="Wed, 12/31/2025" value="dateFormat19"></el-option>
                            <el-option label="Wed, 12/31" value="dateFormat20"></el-option>
                            <el-option label="12/31/2025" value="dateFormat21"></el-option>
                            <el-option label="12/31" value="dateFormat22"></el-option>
                        </el-option-group>
                    </el-select>
                </el-col>
            </el-row>
            <h2>Sizes</h2>
            <el-row>
                <el-col :span="12">Total width: <el-slider size="mini" v-model="totalWidth0" :show-tooltip="false"></el-slider></el-col>
                <el-col :span="12">Font size for place: <el-slider size="mini" v-model="fontSizePlace0" :show-tooltip="false"></el-slider></el-slider></el-col>
            </el-row>
            <el-row>
                <el-col :span="12">Font size for time: <el-slider size="mini" v-model="fontSizeTime0" :show-tooltip="false"></el-slider></el-slider></el-col>
                <el-col :span="12">Font size for date: <el-slider size="mini" v-model="fontSizeDate0" :show-tooltip="false"></el-slider></el-slider></el-col>
            </el-row>
            <h2>Colors & Fonts</h2>
            <el-row>
                <el-col :span="8">Background color: <el-color-picker size="mini" v-model="backgroundColor" :predefine="predefineColors"></el-color-picker></el-col>
                <el-col :span="8">Border color: <el-color-picker size="mini" v-model="borderColor" :predefine="predefineColors"></el-color-picker></el-col>
                <el-col :span="8">Text color: <el-color-picker size="mini" v-model="textColor" :predefine="predefineColors"></el-color-picker></el-col>
            </el-row>
            <el-row>
                <el-col :span="8">Font weight: 
                    <el-select size="mini" v-model="fontWeight">
                        <el-option label="Bold" value="bold"></el-option>
                        <el-option label="Normal" value="normal"></el-option>
                        <el-option label="Light" value="lighter"></el-option>
                    </el-select>
                </el-col>
                <el-col :span="16">Font type: 
                    <el-input size="mini" v-model="fontType"></el-input>
                    <el-tooltip content="Please make sure the font is installed on your computer, or simply keep it blank." placement="top-end">
                        <el-button icon="el-icon-warning-outline" circle size="mini"></el-button>
                    </el-tooltip>
                </el-col>
            </el-row>
            <h2>Shapes & Behaviors</h2>
            <el-row>
                <el-col :span="8">Shadow: 
                    <el-select size="mini" v-model="shadow">
                        <el-option label="On" value="true"></el-option>
                        <el-option label="Off" value="false"></el-option>
                    </el-select>
                </el-col>
                <el-col :span="8">Round corner: 
                    <el-select size="mini" v-model="roundCorner">
                        <el-option label="On" value="true"></el-option>
                        <el-option label="Off" value="false"></el-option>
                    </el-select>
                </el-col>
                <el-col :span="8">Animation: 
                    <el-select size="mini" v-model="animation">
                        <el-option label="On" value="true"></el-option>
                        <el-option label="Off" value="false"></el-option>
                    </el-select>
                </el-col>
            </el-row>
            <el-row>
                <el-col :span="24">Transparent background: 
                    <el-select size="mini" v-model="transparent">
                        <el-option label="On" value="true"></el-option>
                        <el-option label="Off" value="false"></el-option>
                    </el-select>
                </el-col>
            </el-row>
            <el-row>
                <el-col :span="24">Location switch interval (seconds): 
                    <el-input-number size="mini" v-model="switchTime" :min="1" :max="100000"></el-input-number>
                </el-col>
            </el-row>
        </el-tab-pane>
        <el-tab-pane label="About" name="about">
            <h1>World Clock Widget Generator</h1>
            <p>This webpage is used to generate the World Clock Widget, which can show local times of different places one by one, and handle Daylight Saving Time (DST) automatically.</p>
            <p>This widget is suitable for live-streamers whose audiences are from all over the world.</p>
            <p><a href="generator-zh.html">中文</a> <a href="generator-ja.html">日本語</a></p>
            <h2>Author Information</h2>
            <p>The author of this project is Yanji(颜姬).</p>
            <p><a href="https://github.com/yanjisheng/world-clock" target="_blank">Github repository</a> <a href="https://space.bilibili.com/31719231" target="_blank">BiliBili</a> <a href="https://twitter.com/yanji_channel" target="_blank">Twitter</a></p>
            <h2>How to Use</h2>
            <p>1. Go to the first tab panel, and choose timezones which you need to show on your widget. Edit every item's displaying name, delete items you don't need, arrange the sort, or add items if necessary. Remember to use the <a href="https://data.iana.org/time-zones/tzdb/zone1970.tab" target="_blank">standard IANA timezones</a>, otherwise an error would occur.</p>
            <p>2. Go to the second tab panel, and adjust the sizes, colors, fonts, date and time formats, and other settings you need. You can see the preview on the right, or on the bottom if your browser window is narrow.</p>
            <p>3. When you finish adjusting, click the "Save" button below the preview window, and save the exported "worldclock.html" file. You can edit this file to achieve more complicated functions if you understand HTML, CSS and Javascript.</p>
            <p>4. Finally, in your OBS Studio, add "source" - "browser", choose "local file", and find the file exported above.</p>
            <h2>License</h2>
            <p>This project is issued under MIT license.</p>
        </el-tab-pane>
    </el-tabs>
    <div id="previewBox">
        <h2>Preview</h2>
        <div id="preview">
            <div :style="previewStyle">
                <div id="place" :style="locationStyle">{{locationPreview}}</div>
                <div id="time" :style="timeStyle">{{timeFormatPreview}}</div>
                <div id="date" :style="dateStyle">{{dateFormatPreview}}</div>
            </div>
        </div>
        <el-button id="saveButton" type="primary" @click="exportFile()">Save</el-button>
    </div>
    <el-dialog :title="editBoxTitle" :visible.sync="editBoxVisible">
        <el-row>
            <el-col :span="12">
                IANA timezone: <el-autocomplete v-model="input1" size="mini" :fetch-suggestions="queryTimezone"></el-autocomplete>
            </el-col>
            <el-col :span="12">
                Showing Location Name: <el-input v-model="input2" size="mini"></el-input>
            </el-col>
        </el-row>
        <span slot="footer" class="dialog-footer">
            <el-button type="success" icon="el-icon-check" size="mini" @click="editDone2()" title="Done"></el-button>
        </span>
    </el-dialog>
</div>
<script>
var vue = new Vue({
    el: "#vue",
    data: {
        editingRowNo: -1,
        predefineColors: ["#ffffff", "#ff7777", "#ff0000", "#770000", "#ffbb77", "#ff7700", "#773300", "#ffff77", "#ffff00", "#777700", "#77ff77", "#00ff00", "#007700", 
                "#77ffff", "#00ffff", "#007777", "#7777ff", "#0000ff", "#000077", "#ff77ff", "#ff00ff", "#770077", "#bbbbbb", "#777777", "#333333", "#000000"],
        timezoneList: [
            {showLocation: "Auckland, New Zealand", ianaTimezone: "Pacific/Auckland"}, 
            {showLocation: "Sydney, Australia", ianaTimezone: "Australia/Sydney"}, 
            {showLocation: "Brisbane, Australia", ianaTimezone: "Australia/Brisbane"}, 
            {showLocation: "Adelaide, Australia", ianaTimezone: "Australia/Adelaide"}, 
            {showLocation: "Darwin, Australia", ianaTimezone: "Australia/Darwin"}, 
            {showLocation: "Perth, Australia", ianaTimezone: "Australia/Perth"}, 
            {showLocation: "Tokyo, Japan", ianaTimezone: "Asia/Tokyo"}, 
            {showLocation: "Beijing, China", ianaTimezone: "Asia/Shanghai"}, 
            {showLocation: "Bangkok, Thailand", ianaTimezone: "Asia/Bangkok"}, 
            {showLocation: "Dhaka, Bangladesh", ianaTimezone: "Asia/Dhaka"}, 
            {showLocation: "New Delhi, India", ianaTimezone: "Asia/Kolkata"}, 
            {showLocation: "Karachi, Pakistan", ianaTimezone: "Asia/Karachi"}, 
            {showLocation: "Dubai, UAE", ianaTimezone: "Asia/Dubai"}, 
            {showLocation: "Nairobi, Kenya", ianaTimezone: "Africa/Nairobi"}, 
            {showLocation: "Athens, Greece", ianaTimezone: "Europe/Athens"}, 
            {showLocation: "Cape Town, South Africa", ianaTimezone: "Africa/Johannesburg"}, 
            {showLocation: "Paris, France", ianaTimezone: "Europe/Paris"}, 
            {showLocation: "Lagos, Nigeria", ianaTimezone: "Africa/Lagos"}, 
            {showLocation: "London, United Kingdom", ianaTimezone: "Europe/London"}, 
            {showLocation: "Abidjan, Côte d'Ivoire", ianaTimezone: "Africa/Abidjan"}, 
            {showLocation: "São Paulo, Brazil", ianaTimezone: "America/Sao_Paulo"}, 
            {showLocation: "Santiago, Chile", ianaTimezone: "America/Santiago"}, 
            {showLocation: "Caracas, Venezuela", ianaTimezone: "America/Caracas"}, 
            {showLocation: "Lima, Peru", ianaTimezone: "America/Lima"}, 
            {showLocation: "Mexico City, Mexico", ianaTimezone: "America/Mexico_City"}, 
            {showLocation: "New York, USA", ianaTimezone: "America/New_York"}, 
            {showLocation: "Chicago, USA", ianaTimezone: "America/Chicago"}, 
            {showLocation: "Denver, USA", ianaTimezone: "America/Denver"}, 
            {showLocation: "Los Angeles, USA", ianaTimezone: "America/Los_Angeles"}, 
            {showLocation: "Anchorage, USA", ianaTimezone: "America/Anchorage"}, 
            {showLocation: "Honolulu, USA", ianaTimezone: "Pacific/Honolulu"}, 
        ],
        backgroundColor: "#ffcccc",
        borderColor: "#ff9999",
        textColor: "#ffffff",
        totalWidth: 220,
        fontSizePlace: 20,
        fontSizeTime: 50,
        fontSizeDate: 25,
        shadow: "true",
        roundCorner: "true",
        fontWeight: "bold",
        fontType: "",
        animation: "true",
        dateFormat: "dateFormat2",
        timeFormat: "timeFormat1",
        switchTime: 10,
        transparent: "false",
        ianaTimezoneList: [],
        input1: "",
        input2: "",
        editMode: "edit",
        editBoxVisible: false,
    },
    computed: {
        totalWidth0: {
            get: function (){
                return (this.totalWidth - 5) / 5;
            },
            set: function (v){
                this.totalWidth = v * 5 + 5;
            }
        },
        fontSizePlace0: {
            get: function (){
                return this.fontSizePlace - 5;
            },
            set: function (v){
                this.fontSizePlace = v + 5;
            }
        },
        fontSizeTime0: {
            get: function (){
                return this.fontSizeTime - 5;
            },
            set: function (v){
                this.fontSizeTime = v + 5;
            }
        },
        fontSizeDate0: {
            get: function (){
                return this.fontSizeDate - 5;
            },
            set: function (v){
                this.fontSizeDate = v + 5;
            }
        },
        locationPreview: function() {
            let t = this.timezoneList;
            return t[0].showLocation;
        },
        timeFormatPreview: function() {
            if(this.timeFormat == "timeFormat1"){
                return "23:59:59";
            }else if(this.timeFormat == "timeFormat2"){
                return "23:59";
            }else if(this.timeFormat == "timeFormat3"){
                return "11:59:59 pm";
            }else if(this.timeFormat == "timeFormat4"){
                return "11:59 pm";
            }
            return "";
        },
        dateFormatPreview: function() {
            if(this.dateFormat == "dateFormat1"){
                return "Wednesday, 31 December 2025";
            }else if(this.dateFormat == "dateFormat2"){
                return "Wed, 31 Dec 2025";
            }else if(this.dateFormat == "dateFormat3"){
                return "Wednesday, 31 December";
            }else if(this.dateFormat == "dateFormat4"){
                return "Wed, 31 Dec";
            }else if(this.dateFormat == "dateFormat5"){
                return "31 December 2025";
            }else if(this.dateFormat == "dateFormat6"){
                return "31 Dec";
            }else if(this.dateFormat == "dateFormat7"){
                return "Wednesday, 31/12/2025";
            }else if(this.dateFormat == "dateFormat8"){
                return "Wed, 31/12/2025";
            }else if(this.dateFormat == "dateFormat9"){
                return "Wed, 31/12";
            }else if(this.dateFormat == "dateFormat10"){
                return "31/12/2025";
            }else if(this.dateFormat == "dateFormat11"){
                return "31/12";
            }else  if(this.dateFormat == "dateFormat12"){
                return "Wednesday, December 31, 2025";
            }else if(this.dateFormat == "dateFormat13"){
                return "Wed, Dec 31, 2025";
            }else if(this.dateFormat == "dateFormat14"){
                return "Wednesday, December 31";
            }else if(this.dateFormat == "dateFormat15"){
                return "Wed, Dec 31";
            }else if(this.dateFormat == "dateFormat16"){
                return "December 31, 2025";
            }else if(this.dateFormat == "dateFormat17"){
                return "Dec 31";
            }else if(this.dateFormat == "dateFormat18"){
                return "Wednesday, 12/31/2025";
            }else if(this.dateFormat == "dateFormat19"){
                return "Wed, 12/31/2025";
            }else if(this.dateFormat == "dateFormat20"){
                return "Wed, 12/31";
            }else if(this.dateFormat == "dateFormat21"){
                return "12/31/2025";
            }else if(this.dateFormat == "dateFormat22"){
                return "12/31";
            }
            return "";
        },
        previewStyle: function() {
            if(this.transparent == "true"){
                return "position: relative; width: "+this.totalWidth+"px; padding: 10px; margin: 15px; "+(this.roundCorner=="true"?"border-radius: 20px; ":"")
                    +"text-align: center; font-family: "+(this.fontType==""?"":(this.fontType+","))+"sans-serif; "
                    +"color: "+this.textColor+
                    "; font-weight: "+this.fontWeight+"; "+(this.shadow=="true"?"-webkit-text-stroke: 0.3px #999999; text-shadow: 0px 0px 5px #666666;":"")
            }
            return "position: relative; width: "+this.totalWidth+"px; padding: 10px; margin: 10px; border: 5px solid; "+(this.roundCorner=="true"?"border-radius: 20px; ":"")
                    +"text-align: center; font-family: "+(this.fontType==""?"":(this.fontType+","))+"sans-serif; "
                    +"background-color: "+this.backgroundColor+"; border-color: "+this.borderColor+"; color: "+this.textColor+
                    "; font-weight: "+this.fontWeight+"; "+(this.shadow=="true"?"-webkit-text-stroke: 0.3px #999999; text-shadow: 0px 0px 5px #666666; box-shadow: 0px 0px 10px #666666;":"")
        },
        locationStyle: function() {
            return "font-size: "+ this.fontSizePlace + "px";
        },
        timeStyle: function() {
            return "font-size: "+ this.fontSizeTime + "px";
        },
        dateStyle: function() {
            return "font-size: "+ this.fontSizeDate + "px";
        },
        editBoxTitle: function() {
            if(this.editMode == "add"){
                return "Add timezone";
            }else if(this.editMode == "edit"){
                return "Edit timezone";
            }
            return "";
        },
    },
    methods: {
        showEmptyMessage: function(){
            vue.$message({type:"error", message:"Don't input blank contents."});
        },
        deleteErrorMessage: function(){
            vue.$message({type:"error", message:"Don't delete the only timezone."});
        },
        myForceUpdate: function(){
            vue.$forceUpdate();
        },
        moveUp: function(rowNo){
            if(rowNo>0){
                let t1 = vue.timezoneList[rowNo].ianaTimezone;
                let t2 = vue.timezoneList[rowNo].showLocation;
                vue.timezoneList[rowNo].ianaTimezone = vue.timezoneList[rowNo-1].ianaTimezone;
                vue.timezoneList[rowNo].showLocation = vue.timezoneList[rowNo-1].showLocation;
                vue.timezoneList[rowNo-1].ianaTimezone = t1;
                vue.timezoneList[rowNo-1].showLocation = t2;
            }
            vue.myForceUpdate();
        },
        moveDown: function(rowNo){
            if(rowNo<vue.timezoneList.length-1){
                let t1 = vue.timezoneList[rowNo].ianaTimezone;
                let t2 = vue.timezoneList[rowNo].showLocation;
                vue.timezoneList[rowNo].ianaTimezone = vue.timezoneList[rowNo+1].ianaTimezone;
                vue.timezoneList[rowNo].showLocation = vue.timezoneList[rowNo+1].showLocation;
                vue.timezoneList[rowNo+1].ianaTimezone = t1;
                vue.timezoneList[rowNo+1].showLocation = t2;
            }
            vue.myForceUpdate();
        },
        deleteMe: function(rowNo){
            if(vue.timezoneList.length == 1){
                vue.deleteErrorMessage();
                return;
            }
            for(let i=rowNo; i<vue.timezoneList.length; i++){
                vue.timezoneList[i]= vue.timezoneList[i+1];
            }
            vue.timezoneList.pop();
            vue.myForceUpdate();
        },
        addMe2: function(rowNo){
            vue.input1 = "";
            vue.input2 = "";
            vue.editMode = "add";
            vue.editingRowNo = rowNo + 1;
            vue.editBoxVisible = true;
        },
        editMe2: function(rowNo){
            vue.input1 = vue.timezoneList[rowNo].ianaTimezone;
            vue.input2 = vue.timezoneList[rowNo].showLocation;
            vue.editMode = "edit";
            vue.editingRowNo = rowNo;
            vue.editBoxVisible = true;
        },
        editDone2: function(){
            if(vue.isInputEmpty2()){
                vue.showEmptyMessage();
            }else{
                if(vue.editMode == "add"){
                    vue.timezoneList.push({showLocation: "", ianaTimezone: ""});
                    for(let i=vue.timezoneList.length-1; i>vue.editingRowNo; i--){
                        vue.timezoneList[i] = vue.timezoneList[i-1];
                    }
                    vue.timezoneList[vue.editingRowNo] = {ianaTimezone: vue.input1, showLocation: vue.input2};
                }else if(vue.editMode == "edit"){
                    vue.timezoneList[vue.editingRowNo].ianaTimezone = vue.input1;
                    vue.timezoneList[vue.editingRowNo].showLocation = vue.input2;
                }
                vue.editBoxVisible = false;
                vue.myForceUpdate();
                vue.editingRowNo = -1;
            }
        },
        isInputEmpty2: function(){
            if(vue.input1 == "" || vue.input2 == ""){
                return true;
            }
            return false;
        },
        exportFile: function(){
            let result = "";
            result += '<!DOCTYPE html>\n';
            result += '<html lang="en">\n';
            result += '<head>\n';
            result += '<meta charset="UTF-8">\n';
            result += '<meta name="author" value="yanjisheng">\n';
            result += '<title>World Clock Widget</title>\n';
            result += '<style>\n';
            result += 'body{\n';
            result += '    margin: 0px;\n';
            result += '}\n';
            result += '.out{\n';
            result += '    position: relative;\n';
            result += '    width: '+vue.totalWidth+'px;\n';
            result += '    padding: 10px;\n';
            result += '    text-align: center;\n';
            result += '    color: '+this.textColor+';\n';
            result += '    font-weight: '+this.fontWeight+';\n';
            if(vue.fontType != ""){
                result += '    font-family: '+this.fontType+', sans-serif;\n';
            }else{
                result += '    font-family: sans-serif;\n';
            }
            if(vue.transparent == "true"){
                result += '    margin: 15px;\n';
                if(this.shadow == "true"){
                    result += '    -webkit-text-stroke: 0.3px #999999;\n';
                    result += '    text-shadow: 0px 0px 5px #666666;\n';
                }
            }else{
                result += '    margin: 10px;\n';
                result += '    border: 5px solid;\n';
                if(vue.roundCorner == "true"){
                    result += '    border-radius: 20px;\n';
                }
                result += '    background-color: '+this.backgroundColor+';\n';
                result += '    border-color: '+this.borderColor+';\n';
                if(this.shadow == "true"){
                    result += '    -webkit-text-stroke: 0.3px #999999;\n';
                    result += '    text-shadow: 0px 0px 5px #666666;\n';
                    result += '    box-shadow: 0px 0px 10px #666666;\n';
                }
            }
            result += '}\n';
            result += '.line{\n';
            result += '    position: relative;\n';
            result += '    top: 0px;\n';
            if(this.animation == "true"){
                result += '    animation-name: appear;\n';
                result += '    animation-duration: 0.5s;\n';
                result += '    animation-fill-mode: both;\n';
                result += '}\n';
                result += '@keyframes appear{\n';
                result += '    from {\n';
                result += '        top: -10px;\n';
                result += '        opacity: 0;\n';
                result += '    }\n';
                result += '    to {\n';
                result += '        top: 0px;\n';
                result += '        opacity: 1;\n';
                result += '    }\n';
            }
            result += '}\n';
            result += '.time{\n';
            result += '    font-size: '+this.fontSizeTime+'px;\n';
            result += '    animation-delay: 0.2s;\n';
            result += '}\n';
            result += '.date{\n';
            result += '    font-size: '+this.fontSizeDate+'px;\n';
            result += '    animation-delay: 0.4s;\n';
            result += '}\n';
            result += '.place{\n';
            result += '    font-size: '+this.fontSizePlace+'px;\n';
            result += '    animation-delay: 0s;\n';
            result += '}\n';
            result += '</style>\n';
            result += '</head>\n';
            result += '<body>\n';
            result += '<div class="out" title="Made by yanjisheng">\n';
            result += '<div id="place" class="place line" title="Made by yanjisheng">City, Country</div>\n';
            result += '<div id="time" class="time line" title="Made by yanjisheng">18:00:00</div>\n';
            result += '<div id="date" class="date line" title="Made by yanjisheng">2023/12/31</div>\n';
            result += '</div>\n';
            result += '<script>\n';
            result += 'var timezoneList = [\n';
            for(let i=0; i<this.timezoneList.length; i++){
                result += '{showLocation: "'+this.timezoneList[i].showLocation+'", ianaTimezone: "'+this.timezoneList[i].ianaTimezone+'"}, \n';
            }
            result += '];\n';
            result += 'var url = location.href;\n';
            result += 'if(url.indexOf("?") < 0){\n';
            result += 'location.replace(url+"?0");\n';
            result += '}\n';
            result += 'var serialNo = url.substring(url.indexOf("?")+1);\n';
            result += 'var index = serialNo % timezoneList.length;\n';
            result += 'var place = timezoneList[index].showLocation;\n';
            result += 'var timezone = timezoneList[index].ianaTimezone;\n';
            result += 'document.getElementById("place").innerText=place;\n';
            result += 'function showDateTimePerSecond(){\n';
            result += 'let now = new Date();\n';
            result += 'let timeString = "Invalid Timezone";\n';
            result += 'let dateString = "Please check the IANA timezone is correct.";\n';
            result += 'try{\n';
            if(this.timeFormat == "timeFormat1"){
                result += '    timeString = now.toLocaleTimeString("en-GB", {timeZone: timezone, hour12: false, second: "2-digit", minute: "2-digit", hour: "2-digit"});\n';
            }else if(this.timeFormat == "timeFormat2"){
                result += '    timeString = now.toLocaleTimeString("en-GB", {timeZone: timezone, hour12: false, minute: "2-digit", hour: "2-digit"});\n';
            }else if(this.timeFormat == "timeFormat3"){
                result += '    timeString = now.toLocaleTimeString("en-GB", {timeZone: timezone, hour12: true, second: "2-digit", minute: "2-digit", hour: "2-digit"});\n';
            }else if(this.timeFormat == "timeFormat4"){
                result += '    timeString = now.toLocaleTimeString("en-GB", {timeZone: timezone, hour12: true, minute: "2-digit", hour: "2-digit"});\n';
            }
            if(this.dateFormat == "dateFormat1"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, year: "numeric", month: "long", day: "2-digit", weekday: "long"});\n';
            }else if(this.dateFormat == "dateFormat2"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, year: "numeric", month: "short", day: "2-digit", weekday: "short"});\n';
            }else if(this.dateFormat == "dateFormat3"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, month: "long", day: "2-digit", weekday: "long"});\n';
            }else if(this.dateFormat == "dateFormat4"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, month: "short", day: "2-digit", weekday: "short"});\n';
            }else if(this.dateFormat == "dateFormat5"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, year: "numeric", month: "long", day: "2-digit"});\n';
            }else if(this.dateFormat == "dateFormat6"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, month: "short", day: "2-digit"});\n';
            }else if(this.dateFormat == "dateFormat7"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, year: "numeric", month: "2-digit", day: "2-digit", weekday: "long"});\n';
            }else if(this.dateFormat == "dateFormat8"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, year: "numeric", month: "2-digit", day: "2-digit", weekday: "short"});\n';
            }else if(this.dateFormat == "dateFormat9"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, month: "2-digit", day: "2-digit", weekday: "short"});\n';
            }else if(this.dateFormat == "dateFormat10"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, year: "numeric", month: "2-digit", day: "2-digit"});\n';
            }else if(this.dateFormat == "dateFormat11"){
                result += '    dateString = now.toLocaleDateString("en-GB", {timeZone: timezone, month: "2-digit", day: "2-digit"});\n';
            }else if(this.dateFormat == "dateFormat12"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, year: "numeric", month: "long", day: "2-digit", weekday: "long"});\n';
            }else if(this.dateFormat == "dateFormat13"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, year: "numeric", month: "short", day: "2-digit", weekday: "short"});\n';
            }else if(this.dateFormat == "dateFormat14"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, month: "long", day: "2-digit", weekday: "long"});\n';
            }else if(this.dateFormat == "dateFormat15"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, month: "short", day: "2-digit", weekday: "short"});\n';
            }else if(this.dateFormat == "dateFormat16"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, year: "numeric", month: "long", day: "2-digit"});\n';
            }else if(this.dateFormat == "dateFormat17"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, month: "short", day: "2-digit"});\n';
            }else if(this.dateFormat == "dateFormat18"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, year: "numeric", month: "2-digit", day: "2-digit", weekday: "long"});\n';
            }else if(this.dateFormat == "dateFormat19"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, year: "numeric", month: "2-digit", day: "2-digit", weekday: "short"});\n';
            }else if(this.dateFormat == "dateFormat20"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, month: "2-digit", day: "2-digit", weekday: "short"});\n';
            }else if(this.dateFormat == "dateFormat21"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, year: "numeric", month: "2-digit", day: "2-digit"});\n';
            }else if(this.dateFormat == "dateFormat22"){
                result += '    dateString = now.toLocaleDateString("en-US", {timeZone: timezone, month: "2-digit", day: "2-digit"});\n';
            }
            result += '}catch{}\n';
            result += 'document.getElementById("time").innerText=timeString;\n';
            result += 'document.getElementById("date").innerText=dateString;\n';
            result += '}\n';
            result += 'showDateTimePerSecond();\n';
            result += 'setInterval(showDateTimePerSecond,1000);\n';
            result += 'setTimeout(function(){location.replace(url.substring(0,url.indexOf("?")+1)+(index+1))}, '+this.switchTime+' * 1000);\n';
            result += '<\/script>\n';
            result += '<\/body>\n';
            result += '<\/html>\n';
            console.log(result);
            let blob = new Blob([result], {type: "text/plain;charset=UTF-8"});
            let url = URL.createObjectURL(blob);
            let link = document.createElement("a");
            link.href = url;
            link.setAttribute("download", "worldclock.html");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        },
        queryTimezone: function(qs, cb){
            let list = this.ianaTimezoneList;
            let cbs = []
            let exactMatch = [];
            if(qs.length > 0){
                for(let t in list){
                    let i = list[t].toLowerCase().lastIndexOf(qs.toLowerCase());
                    if(i > -1 && list[t].toLowerCase().charAt(i-1) == '/'){
                        cbs.push({value: list[t]});
                        exactMatch.push(t);
                    }
                }
            }
            for(let t in list){
                if(list[t].toLowerCase().indexOf(qs.toLowerCase()) > -1){
                    let j;
                    for(j=0; j<exactMatch.length; j++){
                        if(t == exactMatch[j]){
                            break;
                        }
                    }
                    if(j<exactMatch.length){
                        continue;
                    }
                    cbs.push({value: list[t]});
                }
            }
            cb(cbs);
        }
    },
    mounted() {
        this.ianaTimezoneList = Intl.supportedValuesOf('timeZone');
    }
});
</script>
</body>
</html>
